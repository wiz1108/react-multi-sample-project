(this.webpackJsonpmessaging=this.webpackJsonpmessaging||[]).push([[0],{380:function(e,t,a){e.exports=a.p+"static/media/photo-1438761681033-6461ffad8d80.eee37ee5.jpeg"},381:function(e,t,a){e.exports=a.p+"static/media/photo-1463453091185-61582044d556.a10d0ecf.jpeg"},382:function(e,t,a){e.exports=a.p+"static/media/photo-1503467913725-8484b65b0715.44bc3e89.jpeg"},383:function(e,t,a){e.exports=a.p+"static/media/photo-1519345182560-3f2917c472ef.a36389b6.jpeg"},384:function(e,t,a){e.exports=a.p+"static/media/photo-1506089676908-3592f7389d4d.de96ec3a.jpeg"},385:function(e,t,a){e.exports=a.p+"static/media/photo-1507003211169-0a1dd7228f2d.9bdeb468.jpeg"},386:function(e,t,a){e.exports=a.p+"static/media/photo-1517202383675-eb0a6e27775f.1864b915.jpeg"},387:function(e,t,a){e.exports=a.p+"static/media/photo-1531251445707-1f000e1e87d0.07978947.jpeg"},388:function(e,t,a){e.exports=a.p+"static/media/photo-1541271696563-3be2f555fc4e.4e84f363.jpeg"},389:function(e,t,a){e.exports=a.p+"static/media/photo-1542345812-d98b5cd6cf98.149796d5.jpeg"},390:function(e,t,a){e.exports=a.p+"static/media/photo-1546539782-6fc531453083.fe0d4222.jpeg"},391:function(e,t,a){e.exports=a.p+"static/media/photo-1546623381-d6d69cd69955.df1d202f.jpeg"},392:function(e,t,a){e.exports=a.p+"static/media/photo-1546820389-44d77e1f3b31.ddd84bce.jpeg"},393:function(e,t,a){e.exports=a.p+"static/media/photo-1548946526-f69e2424cf45.cdd62d22.jpeg"},394:function(e,t,a){e.exports=a.p+"static/media/photo-1549351236-caca0f174515.fd0c1000.jpeg"},395:function(e,t,a){e.exports=a.p+"static/media/photo-1551069613-1904dbdcda11.89f40904.jpeg"},396:function(e,t,a){e.exports=a.p+"static/media/photo-1554384645-13eab165c24b.b980e4f7.jpeg"},397:function(e,t,a){e.exports=a.p+"static/media/photo-1569443693539-175ea9f007e8.78073ccc.jpeg"},398:function(e,t,a){e.exports=a.p+"static/media/photo-1573140247632-f8fd74997d5c.77d2e7a6.jpeg"},399:function(e,t,a){e.exports=a.p+"static/media/photo-1546456073-6712f79251bb.24309ff6.jpeg"},400:function(e,t,a){e.exports=a.p+"static/media/photo-1502378735452-bc7d86632805.94a54b7b.jpeg"},401:function(e,t,a){e.exports=a.p+"static/media/photo-1546967191-fdfb13ed6b1e.1d750cf2.jpeg"},402:function(e,t,a){e.exports=a.p+"static/media/photo-1502937406922-305bb2789e95.edbd0437.jpeg"},403:function(e,t,a){e.exports=a.p+"static/media/photo-1552058544-f2b08422138a.fe0cd750.jpeg"},409:function(e,t,a){e.exports=a.p+"static/media/stream.ce7bf370.png"},433:function(e,t,a){e.exports=a(899)},645:function(e,t,a){},646:function(e,t,a){},647:function(e,t,a){},784:function(e,t,a){},785:function(e,t,a){},786:function(e,t,a){},787:function(e,t,a){},788:function(e,t,a){},789:function(e,t,a){},790:function(e,t,a){},899:function(e,t,a){"use strict";a.r(t);a(434),a(444);var n=a(0),l=a.n(n),r=a(58),i=a.n(r),c=a(41),s=a.n(c),o=a(68),u=a(30),d=a(50),m=a(919),v=a(918),p=a(917),h=function(e,t){Object(n.useEffect)((function(){var a,n=(a=t,function(e){window.parent.postMessage(e,a)}),l=function(e){var t=e.type,a=e.message;switch(t){case"reaction.new":n("react-to-message");break;case"message.new":if("giphy"===a.command){n("run-giphy");break}if(a.attachments.length){if("video"===a.attachments[0].type&&"https://youtu.be/Ujvy-DEA-UM"===a.attachments[0].og_scrape_url){n("send-youtube");break}if("image"===a.attachments[0].type){n("drag-drop-image");break}}if(a.parent_id){n("start-thread");break}n("send-message")}};return e&&e.on(l),function(){return null===e||void 0===e?void 0:e.off(l)}}),[e,t])},g=(a(644),a(645),a(230)),f=a(162),E=a(7),_=a(130),b=a.n(_),w=a(380),C=a.n(w),j=a(381),x=a.n(j),O=a(382),y=a.n(O),N=a(383),k=a.n(N),L=a(384),R=a.n(L),M=a(385),S=a.n(M),z=a(386),I=a.n(z),Z=a(387),H=a.n(Z),A=a(388),V=a.n(A),U=a(389),q=a.n(U),B=a(390),P=a.n(B),J=a(391),T=a.n(J),D=a(392),F=a.n(D),G=a(393),K=a.n(G),$=a(394),W=a.n($),X=a(395),Y=a.n(X),Q=a(396),ee=a.n(Q),te=a(397),ae=a.n(te),ne=a(398),le=a.n(ne),re=a(399),ie=a.n(re),ce=a(400),se=a.n(ce),oe=a(401),ue=a.n(oe),de=a(402),me=a.n(de),ve=a(403),pe=a.n(ve),he=function(e){var t=e.isEditing,a=e.setIsEditing;return l.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer",marginLeft:"16px"},onClick:function(){t||a(!0)}},l.a.createElement("path",{d:"M12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z",fill:"#858688"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 8L13 6H11V8H13ZM13 10H11V18H13V10Z",fill:"white"}))},ge=function(){return l.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer",marginLeft:"16px"}},l.a.createElement("path",{d:"M12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z",fill:"#858688"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.3875 7.73454C15.9092 7.4584 15.2977 7.62228 15.0215 8.10057L11.3573 14.4472L8.62166 11.7116C8.23113 11.3211 7.59797 11.3211 7.20744 11.7116C6.81692 12.1022 6.81692 12.7353 7.20744 13.1259L10.8123 16.7307C10.8303 16.7487 10.8488 16.7658 10.8677 16.7821C10.9278 16.8418 10.9965 16.8948 11.0732 16.9392C11.5515 17.2153 12.1631 17.0514 12.4393 16.5731L16.7536 9.10057C17.0297 8.62228 16.8658 8.01069 16.3875 7.73454Z",fill:"white"}))},fe=function(e){var t=e.closeThread;return l.a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(e){return t(e)},style:{cursor:"pointer",marginRight:"10px"}},l.a.createElement("path",{d:"M0 20C0 8.95431 8.95431 0 20 0C31.0457 0 40 8.95431 40 20C40 31.0457 31.0457 40 20 40C8.95431 40 0 31.0457 0 20Z",fill:"#3E3E41"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.5625 25.4416L22.1208 20L27.5625 14.5583C28.15 13.9708 28.15 13.025 27.5625 12.4375C26.975 11.85 26.0291 11.85 25.4416 12.4375L20 17.8791L14.5583 12.4375C13.9708 11.85 13.025 11.85 12.4375 12.4375C11.85 13.025 11.85 13.9708 12.4375 14.5583L17.8791 20L12.4375 25.4416C11.85 26.0291 11.85 26.975 12.4375 27.5625C13.025 28.15 13.9708 28.15 14.5583 27.5625L20 22.1208L25.4416 27.5625C26.0291 28.15 26.975 28.15 27.5625 27.5625C28.1458 26.975 28.1458 26.025 27.5625 25.4416Z",fill:"#E9E9EA"}))},Ee=function(){return l.a.createElement("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 17.9708H0V13.7278L13.435 0.292787C13.8255 -0.0975955 14.4585 -0.0975955 14.849 0.292787L17.678 3.12179C18.0684 3.51229 18.0684 4.14529 17.678 4.53579L6.243 15.9708H18V17.9708ZM2 15.9708H3.414L12.728 6.65679L11.314 5.24279L2 14.5568V15.9708ZM15.556 3.82879L14.142 5.24279L12.728 3.82879L14.142 2.41479L15.556 3.82879Z",fill:"#E9E9EA"}))},_e=function(){return l.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("g",null,l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10Z"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 7.5C9 8.32843 8.32843 9 7.5 9C6.67157 9 6 8.32843 6 7.5C6 6.67157 6.67157 6 7.5 6C8.32843 6 9 6.67157 9 7.5Z"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7.5C14 8.32843 13.3284 9 12.5 9C11.6716 9 11 8.32843 11 7.5C11 6.67157 11.6716 6 12.5 6C13.3284 6 14 6.67157 14 7.5Z"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.42662 11.1808C5.87907 10.8641 6.5026 10.9741 6.81932 11.4266C7.30834 12.1252 8.21252 12.9219 9.29096 13.1459C10.275 13.3503 11.6411 13.1262 13.2568 11.3311C13.6263 10.9206 14.2585 10.8873 14.6691 11.2567C15.0796 11.6262 15.1128 12.2585 14.7434 12.669C12.759 14.8738 10.7085 15.4831 8.88421 15.1041C7.15432 14.7448 5.8585 13.5415 5.18085 12.5735C4.86414 12.121 4.97417 11.4975 5.42662 11.1808Z"})))},be=function(){return l.a.createElement("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer",margin:"10px"}},l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.333344H15.5V2.00001H0.5V0.333344ZM0.5 6.16667H15.5V7.83334H0.5V6.16667ZM15.5 12H0.5V13.6667H15.5V12Z",fill:"white"}))},we=function(){return l.a.createElement("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M2.75749 0.666626H5.66659L3.72719 4.54541H5.66659L2.03022 11.3333L2.75749 6.48481H0.333252L2.75749 0.666626Z",fill:"white"}))},Ce=function(){return l.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 10C20 4.48 15.52 0 10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10ZM6 9H10V6L14 10L10 14V11H6V9Z",fill:"white"}))},je=function(){return l.a.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.72472 8.39971L6.325 5L9.72472 1.60029C10.0918 1.23324 10.0918 0.642327 9.72472 0.275283C9.35767 -0.091761 8.76676 -0.091761 8.39971 0.275283L5 3.675L1.60029 0.275283C1.23324 -0.091761 0.642327 -0.091761 0.275283 0.275283C-0.091761 0.642327 -0.091761 1.23324 0.275283 1.60029L3.675 5L0.275283 8.39971C-0.091761 8.76676 -0.091761 9.35767 0.275283 9.72472C0.642327 10.0918 1.23324 10.0918 1.60029 9.72472L5 6.325L8.39971 9.72472C8.76676 10.0918 9.35767 10.0918 9.72472 9.72472C10.0892 9.35767 10.0892 8.76415 9.72472 8.39971Z",fill:"white"}))},xe=function(){return l.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M12 2C17.52 2 22 6.48 22 12C22 17.52 17.52 22 12 22C6.48 22 2 17.52 2 12C2 6.48 6.48 2 12 2Z",fill:"#858688"}),l.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7247 15.3997L13.325 12L16.7247 8.60029C17.0918 8.23324 17.0918 7.64233 16.7247 7.27528C16.3577 6.90824 15.7668 6.90824 15.3997 7.27528L12 10.675L8.60029 7.27528C8.23324 6.90824 7.64233 6.90824 7.27528 7.27528C6.90824 7.64233 6.90824 8.23324 7.27528 8.60029L10.675 12L7.27528 15.3997C6.90824 15.7668 6.90824 16.3577 7.27528 16.7247C7.64233 17.0918 8.23324 17.0918 8.60029 16.7247L12 13.325L15.3997 16.7247C15.7668 17.0918 16.3577 17.0918 16.7247 16.7247C17.0892 16.3577 17.0892 15.7642 16.7247 15.3997Z",fill:"white"}))},Oe=[C.a,x.a,y.a,k.a,R.a,S.a,I.a,H.a,V.a,q.a,P.a,T.a,F.a,K.a,W.a,Y.a,ee.a,ae.a,le.a,ie.a,se.a,ue.a,me.a,pe.a],ye=function(){var e=Math.floor(24*Math.random());return Oe[e]},Ne=function(e){var t,a,n,l=(null===(t=e.user)||void 0===t?void 0:t.image)||"",r=Oe.findIndex((function(e){return e.includes(l.slice(1,-14))}));return l=-1===r?ye():Oe[r],"Jen Alexander"===(null===(a=e.user)||void 0===a?void 0:a.name)&&(l=Oe[11]),"Kevin Rosen"===(null===(n=e.user)||void 0===n?void 0:n.name)&&(l=Oe[23]),l},ke=(a(646),function(e){var t=e.user;return l.a.createElement("li",{className:"messaging-create-channel__user-result"},l.a.createElement(f.a,{image:t.image,name:t.name||t.id,size:40}),t.online&&l.a.createElement("div",{className:"messaging-create-channel__user-result-online"}),l.a.createElement("div",{className:"messaging-create-channel__user-result__details"},l.a.createElement("span",null,t.name)))}),Le=l.a.memo((function(e){var t=e.onClose,a=e.toggleMobile,r=Object(E.c)(),i=r.client,c=r.setActiveChannel,d=Object(n.useState)(void 0),m=Object(u.a)(d,2),v=m[0],p=m[1],h=Object(n.useState)(""),f=Object(u.a)(h,2),_=f[0],w=f[1],C=Object(n.useState)(!1),j=Object(u.a)(C,2),x=j[0],O=j[1],y=Object(n.useState)(!1),N=Object(u.a)(y,2),k=N[0],L=N[1],R=Object(n.useState)(!1),M=Object(u.a)(R,2),S=M[0],z=M[1],I=Object(n.useState)([]),Z=Object(u.a)(I,2),H=Z[0],A=Z[1],V=Object(n.useState)([]),U=Object(u.a)(V,2),q=U[0],B=U[1],P=Object(n.useRef)(),J=function(){w(""),O(!1),L(!1)};Object(n.useEffect)((function(){var e=function(){x&&J()};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}),[]);var T=function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:return z(!0),e.prev=3,e.next=6,i.queryUsers({id:{$ne:i.userID},$and:[{name:{$autocomplete:_}},{name:{$nin:["Daniel Smith","Kevin Rosen","Jen Alexander"]}}]},{id:1},{limit:6});case 6:(t=e.sent).users.length?(L(!1),B(t.users)):L(!0),O(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log({error:e.t0});case 14:z(!1);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),D=b()(T,100,{trailing:!0});Object(n.useEffect)((function(){_&&D()}),[_]);var F=function(){var e=Object(o.a)(s.a.mark((function e(){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=H.map((function(e){return e.id}))).length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i.channel("messaging",{members:[].concat(Object(g.a)(a),[i.userID])});case 5:return n=e.sent,e.next=8,n.watch();case 8:c(n),A([]),B([]),t();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){H.find((function(t){return t.id===e.id}))||(A([].concat(Object(g.a)(H),[e])),O(!1),w(""),P.current.focus())},K=Object(n.useCallback)((function(e){if(38===e.which&&p((function(e){return void 0===e?0:0===e?q.length-1:e-1})),40===e.which&&p((function(e){return void 0===e||e===q.length-1?0:e+1})),13===e.which&&(e.preventDefault(),void 0!==v))return G(q[v]),p(void 0)}),[q,v]);return Object(n.useEffect)((function(){return document.addEventListener("keydown",K,!1),function(){return document.removeEventListener("keydown",K)}}),[K]),l.a.createElement("div",{className:"messaging-create-channel"},l.a.createElement("header",null,l.a.createElement("div",{className:"messaging-create-channel__left"},l.a.createElement("div",{className:"messaging-create-channel__left-text"},"To: "),l.a.createElement("div",{className:"users-input-container"},!!(null===H||void 0===H?void 0:H.length)&&l.a.createElement("div",{className:"messaging-create-channel__users"},H.map((function(e){return l.a.createElement("div",{className:"messaging-create-channel__user",onClick:function(){return function(e){var t=H.filter((function(t){return t.id!==e.id}));A(t),P.current.focus()}(e)},key:e.id},l.a.createElement("div",{className:"messaging-create-channel__user-text"},e.name),l.a.createElement(je,null))}))),l.a.createElement("form",{onSubmit:G},l.a.createElement("input",{autoFocus:!0,ref:P,value:_,onChange:function(e){return w(e.target.value)},placeholder:H.length?"":"Start typing for suggestions",type:"text",className:"messaging-create-channel__input"}))),l.a.createElement("div",{className:"close-mobile-create",onClick:function(){return a()}},l.a.createElement(xe,null))),l.a.createElement("button",{className:"create-channel-button",onClick:F},"Start chat")),_&&l.a.createElement("main",null,l.a.createElement("ul",{className:"messaging-create-channel__user-results"},!!(null===q||void 0===q?void 0:q.length)&&!k&&l.a.createElement("div",null,q.map((function(e,t){return l.a.createElement("div",{className:"messaging-create-channel__user-result ".concat(v===t&&"focused"),onClick:function(){return G(e)},key:e.id},l.a.createElement(ke,{user:e}))}))),k&&l.a.createElement("div",{onClick:function(){P.current.focus(),J()},className:"messaging-create-channel__user-result empty"},"No people found..."))))})),Re=a(422),Me=(a(647),function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Re.a,e))}),Se=a(9),ze=(a(784),a(168)),Ie=(a(785),function(){var e=Object(E.c)().client,t=Object(ze.b)().typing;if(!e||!t)return null;var a=Object.values(t).filter((function(t){var a,n=t.user;return(null===n||void 0===n?void 0:n.id)!==(null===(a=e.user)||void 0===a?void 0:a.id)})).map((function(e){var t=e.user;return t.name||t.id})),n="";return 1===a.length?n="".concat(a[0]," is typing"):2===a.length?n="".concat(a[0]," and ").concat(a[1]," are typing"):a.length>2&&(n="".concat(a[0]," and ").concat(a.length-1," more are typing")),l.a.createElement("div",{className:"messaging__typing-indicator"},n&&l.a.createElement("div",{className:"dots"},l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"}),l.a.createElement("span",{className:"dot"})),l.a.createElement("div",null,n))}),Ze=l.a.memo((function(e){var t,a=Object(E.c)().client,r=Object(Se.b)().channel,i=Object(n.useState)((null===r||void 0===r?void 0:r.data.name)||""),c=Object(u.a)(i,2),d=c[0],m=c[1],v=Object(n.useState)(!1),p=Object(u.a)(v,2),h=p[0],g=p[1],_=Object(n.useState)(""),b=Object(u.a)(_,2),w=b[0],C=b[1],j=Object(n.useRef)(),x=Object.values((null===(t=r.state)||void 0===t?void 0:t.members)||{}).filter((function(e){var t,n;return(null===(t=e.user)||void 0===t?void 0:t.id)!==(null===(n=a.user)||void 0===n?void 0:n.id)})),O=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),!d||d===r.data.name){e.next=4;break}return e.next=4,r.update({name:d},{text:"Channel name changed to ".concat(d)});case 4:g(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h&&j.current&&j.current.focus()}),[h]),Object(n.useEffect)((function(){d||C(x.map((function(e){var t,a;return(null===(t=e.user)||void 0===t?void 0:t.name)||(null===(a=e.user)||void 0===a?void 0:a.id)||"Unnamed User"})).join(", "))}),[d,x]);var y=function(){return l.a.createElement("form",{style:{flex:1},onSubmit:function(e){e.preventDefault(),j.current.blur()}},l.a.createElement("input",{autoFocus:!0,className:"channel-header__edit-input",onBlur:O,onChange:function(e){return m(e.target.value)},placeholder:"Type a new name for the chat",ref:j,value:d}))};return l.a.createElement("div",{className:"messaging__channel-header"},l.a.createElement("div",{id:"mobile-nav-icon",className:"".concat(e.theme),onClick:function(){return e.toggleMobile()}},l.a.createElement(be,null)),function(e){var t,a,n,r,i,c,s,o,u,d;return 1===e.length?l.a.createElement("div",{className:"messaging__channel-header__avatars"},l.a.createElement(f.a,{image:Ne(e[0]),name:null===(t=e[0].user)||void 0===t?void 0:t.id,size:40}),";"):2===e.length?l.a.createElement("div",{className:"messaging__channel-header__avatars two"},l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[0]),name:null===(a=e[0].user)||void 0===a?void 0:a.id,shape:"square",size:40})),l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[1]),name:null===(n=e[1].user)||void 0===n?void 0:n.id,shape:"square",size:40}))):3===e.length?l.a.createElement("div",{className:"messaging__channel-header__avatars three"},l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[0]),name:null===(r=e[0].user)||void 0===r?void 0:r.id,shape:"square",size:40})),l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[1]),name:null===(i=e[1].user)||void 0===i?void 0:i.id,shape:"square",size:20}),l.a.createElement(f.a,{image:Ne(e[2]),name:null===(c=e[2].user)||void 0===c?void 0:c.id,shape:"square",size:20}))):e.length>=4?l.a.createElement("div",{className:"messaging__channel-header__avatars four"},l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[e.length-1]),name:null===(s=e[0].user)||void 0===s?void 0:s.id,shape:"square",size:20}),l.a.createElement(f.a,{image:Ne(e[e.length-2]),name:null===(o=e[1].user)||void 0===o?void 0:o.id,shape:"square",size:20})),l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[e.length-3]),name:null===(u=e[2].user)||void 0===u?void 0:u.id,shape:"square",size:20}),l.a.createElement(f.a,{image:Ne(e[e.length-4]),name:null===(d=e[3].user)||void 0===d?void 0:d.id,shape:"square",size:20}))):null}(x),h?l.a.createElement(y,null):l.a.createElement("div",{className:"channel-header__name"},d||w),l.a.createElement("div",{className:"messaging__channel-header__right"},l.a.createElement(Ie,null),"Social Demo"!==d&&(h?l.a.createElement(ge,null):l.a.createElement(he,{isEditing:h,setIsEditing:g}))))})),He=(a(786),function(){return l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("ul",{className:"skeleton-loader__list"},l.a.createElement("li",null,l.a.createElement("div",{className:"skeleton-loader__avatar"}),l.a.createElement("div",{className:"skeleton-loader__text"},l.a.createElement("div",null),l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement("div",{className:"skeleton-loader__avatar"}),l.a.createElement("div",{className:"skeleton-loader__text"},l.a.createElement("div",null),l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement("div",{className:"skeleton-loader__avatar"}),l.a.createElement("div",{className:"skeleton-loader__text"},l.a.createElement("div",null),l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement("div",{className:"skeleton-loader__avatar"}),l.a.createElement("div",{className:"skeleton-loader__text"},l.a.createElement("div",null),l.a.createElement("div",null))),l.a.createElement("li",null,l.a.createElement("div",{className:"skeleton-loader__avatar"}),l.a.createElement("div",{className:"skeleton-loader__text"},l.a.createElement("div",null),l.a.createElement("div",null)))))}),Ae=a(409),Ve=a.n(Ae),Ue=l.a.memo((function(e){var t=e.children,a=e.error,r=void 0!==a&&a,i=e.loading,c=e.onCreateChannel,u=Object(E.c)(),d=u.client,m=u.setActiveChannel,v=d.user||{},p=v.id,h=v.image,g=void 0===h?Ve.a:h,_=v.name,b=void 0===_?"Example User":_;Object(n.useEffect)((function(){var e,a,n=function(){var e=Object(o.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.channel("messaging","first",{name:"Social Demo",demo:"social"}),e.next=3,a.watch();case 3:return e.next=5,a.addMembers([t.user.id]);case 5:m(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i||(null===t||void 0===t||null===(e=t.props)||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)||n(d)}),[i]);var w=function(e){var t=e.children;return l.a.createElement("div",{className:"messaging__channel-list"},l.a.createElement("div",{className:"messaging__channel-list__header"},l.a.createElement(f.a,{image:g,name:b,size:40}),l.a.createElement("div",{className:"messaging__channel-list__header__name"},b||p),l.a.createElement("button",{className:"messaging__channel-list__header__button",onClick:c},l.a.createElement(Ee,null))),t)};return r?l.a.createElement(w,null,l.a.createElement("div",{className:"messaging__channel-list__message"},"Error loading conversations, please try again momentarily.")):i?l.a.createElement(w,null,l.a.createElement("div",{className:"messaging__channel-list__message"},l.a.createElement(He,null))):l.a.createElement(w,null,t)})),qe=(a(787),function(e){var t=e.channel,a=e.latestMessage,r=e.setActiveChannel,i=e.setIsCreating,c=Object(n.useContext)(E.a),s=c.channel,o=c.client,u=Object.values(t.state.members).filter((function(e){return e.user.id!==o.userID}));return l.a.createElement("div",{className:(null===t||void 0===t?void 0:t.id)===(null===s||void 0===s?void 0:s.id)?"channel-preview__container selected":"channel-preview__container",onClick:function(){i(!1),r(t)}},function(e){var t,a,n,r,i,c,s,o,u,d;return 1===e.length?l.a.createElement(f.a,{image:Ne(e[0]),name:null===(t=e[0].user)||void 0===t?void 0:t.id,size:40}):2===e.length?l.a.createElement("div",{className:"channel-preview__avatars two"},l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[0]),name:null===(a=e[0].user)||void 0===a?void 0:a.id,shape:"square",size:40})),l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[1]),name:null===(n=e[1].user)||void 0===n?void 0:n.id,shape:"square",size:40}))):3===e.length?l.a.createElement("div",{className:"channel-preview__avatars three"},l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[0]),name:null===(r=e[0].user)||void 0===r?void 0:r.id,shape:"square",size:40})),l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[1]),name:null===(i=e[1].user)||void 0===i?void 0:i.id,shape:"square",size:20}),l.a.createElement(f.a,{image:Ne(e[2]),name:null===(c=e[2].user)||void 0===c?void 0:c.id,shape:"square",size:20}))):e.length>=4?l.a.createElement("div",{className:"channel-preview__avatars"},l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[e.length-1]),name:null===(s=e[0].user)||void 0===s?void 0:s.id,shape:"square",size:20}),l.a.createElement(f.a,{image:Ne(e[e.length-2]),name:null===(o=e[1].user)||void 0===o?void 0:o.id,shape:"square",size:20})),l.a.createElement("span",null,l.a.createElement(f.a,{image:Ne(e[e.length-3]),name:null===(u=e[2].user)||void 0===u?void 0:u.id,shape:"square",size:20}),l.a.createElement(f.a,{image:Ne(e[e.length-4]),name:null===(d=e[3].user)||void 0===d?void 0:d.id,shape:"square",size:20}))):null}(u),l.a.createElement("div",{className:"channel-preview__content-wrapper"},l.a.createElement("div",{className:"channel-preview__content-top"},l.a.createElement("p",{className:"channel-preview__content-name"},t.data.name||function(e){var t,a,n;return e.length&&1!==e.length?"".concat((null===(t=e[0])||void 0===t?void 0:t.user.name)||"Johnny Blaze",", ").concat((null===(a=e[1])||void 0===a?void 0:a.user.name)||"Johnny Blaze"):(null===(n=e[0])||void 0===n?void 0:n.user.name)||"Johnny Blaze"}(u)),l.a.createElement("p",{className:"channel-preview__content-time"},function(e){var t,a,n=null===(t=e.state.last_message_at)||void 0===t?void 0:t.getHours(),l=null===(a=e.state.last_message_at)||void 0===a?void 0:a.getMinutes(),r="AM";return void 0===n||void 0===l?"":(n>12&&(n-=12,r="PM"),0===n&&(n=12),12===n&&(r="PM"),1===l.toString().length&&(l="0".concat(l)),"".concat(n,":").concat(l," ").concat(r))}(t))),l.a.createElement("p",{className:"channel-preview__content-message"},a||"Send a message")))}),Be=a(26),Pe=a(32),Je=a(106),Te=a(109),De=a(107),Fe=(a(788),function(){return l.a.createElement("div",{className:"giphy-icon__wrapper"},l.a.createElement(we,null),l.a.createElement("p",{className:"giphy-icon__text"},"GIPHY"))}),Ge=l.a.memo((function(){var e=Object(n.useContext)(vt),t=e.giphyState,a=e.setGiphyState,r=Object(Se.b)(),i=r.acceptedFiles,c=r.maxNumberOfFiles,s=r.multipleUploads,o=Object(Pe.b)(),u=Object(n.useCallback)((function(e){var n,l=e.target.value,r="deleteContentBackward"===(null===(n=e.nativeEvent)||void 0===n?void 0:n.inputType);1===o.text.length&&r&&a(!1),t||!o.text.startsWith("/giphy")||o.numberOfUploads||(e.target.value=l.replace("/giphy",""),a(!0)),o.handleChange(e)}),[t,o.numberOfUploads,o.text]);return l.a.createElement("div",{className:"str-chat__messaging-input"},l.a.createElement("div",{className:"messaging-input__button emoji-button",role:"button","aria-roledescription":"button",onClick:o.openEmojiPicker,ref:o.emojiPickerRef},l.a.createElement(_e,null)),l.a.createElement(Be.d,{accept:i,handleFiles:o.uploadNewFiles,multiple:s,disabled:void 0!==c&&o.numberOfUploads>=c||t},l.a.createElement("div",{className:"messaging-input__input-wrapper"},t&&!o.numberOfUploads&&l.a.createElement(Fe,null),l.a.createElement(Je.a,null),l.a.createElement(Te.a,{onChange:u,rows:1,placeholder:"Send a message"}))),l.a.createElement("div",{className:"messaging-input__button",role:"button","aria-roledescription":"button",onClick:o.handleSubmit},l.a.createElement(Ce,null)),l.a.createElement(De.a,null))})),Ke=(a(789),function(e){var t=e.closeThread,a=e.thread;return l.a.createElement("div",{className:"custom-thread-header"},l.a.createElement("div",{className:"custom-thread-header__left"},l.a.createElement("p",{className:"custom-thread-header__left-title"},"Thread"),l.a.createElement("p",{className:"custom-thread-header__left-count"},(null===a||void 0===a?void 0:a.reply_count)?1===a.reply_count?"1 reply":"".concat(a.reply_count," Replies"):"")),l.a.createElement(fe,{closeThread:t}))}),$e=(a(790),a(70)),We=a(21),Xe=a(915),Ye=a(423),Qe=a(421),et=a(920),tt=function(e){var t=e.theme,a=e.toggleMobile,r=Object(n.useContext)(vt),i=r.giphyState,c=r.setGiphyState,s=Object(We.b)().sendMessage;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Xe.a,null,l.a.createElement(Ze,{theme:t,toggleMobile:a}),l.a.createElement(Ye.a,{messageActions:["delete","edit","flag","mute","react","reply"]}),l.a.createElement(Qe.a,{focus:!0,overrideSubmitHandler:function(e){var t,a,n;if((null===(t=e.attachments)||void 0===t?void 0:t.length)&&(null===(a=e.text)||void 0===a?void 0:a.startsWith("/giphy"))){var l=e.text.replace("/giphy","");n=Object($e.a)(Object($e.a)({},e),{},{text:l})}if(i){var r="/giphy ".concat(e.text);n=Object($e.a)(Object($e.a)({},e),{},{text:r})}if(s){var o,u,m,v=n||e,p=v.parent,h=Object($e.a)(Object($e.a)({},v),{},{parent:p?Object($e.a)(Object($e.a)({},p),{},{created_at:null===(o=p.created_at)||void 0===o?void 0:o.toString(),pinned_at:null===(u=p.pinned_at)||void 0===u?void 0:u.toString(),updated_at:null===(m=p.updated_at)||void 0===m?void 0:m.toString()}):void 0}),g=s(h);Object(d.b)(g,"send message")}c(!1)}})),l.a.createElement(et.a,{Input:Ge}))},at=new URLSearchParams(window.location.search),nt=at.get("apikey")||"dz5f4d5kzrue",lt=at.get("user")||"daddy-dan",rt=at.get("user_token")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZGFkZHktZGFuIn0.59VB8bPAtojkl5NjUY0OA5zK4CoOdafQmchbVeJb2rg",it=at.get("target_origin")||Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_STREAM_KEY:"dz5f4d5kzrue",REACT_APP_USER_ID:"daddy-dan",REACT_APP_USER_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZGFkZHktZGFuIn0.59VB8bPAtojkl5NjUY0OA5zK4CoOdafQmchbVeJb2rg"}).REACT_APP_TARGET_ORIGIN,ct=at.get("no_channel_name_filter")||!1,st=at.get("skip_name_image_set")||!1,ot=ct?{type:"messaging",members:{$in:[lt]}}:{type:"messaging",name:"Social Demo",demo:"social"},ut={state:!0,watch:!0,presence:!0,limit:8},dt={last_message_at:-1,updated_at:-1,cid:1},mt={id:lt,name:lt,image:ye()};st&&(delete mt.name,delete mt.image);var vt=l.a.createContext({}),pt=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),c=Object(u.a)(i,2),g=c[0],f=c[1],E=Object(n.useState)(!1),_=Object(u.a)(E,2),b=_[0],w=_[1],C=Object(n.useState)(!1),j=Object(u.a)(C,2),x=j[0],O=j[1],y=Object(n.useState)("dark"),N=Object(u.a)(y,2),k=N[0],L=N[1];h(a,it),Object(n.useEffect)((function(){return function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.a.getInstance(nt),e.next=3,t.connectUser(mt,rt);case 3:r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return a.disconnectUser()}}),[]),Object(n.useEffect)((function(){var e=function(e){var t=e.data;e.origin===it&&("light"!==t&&"dark"!==t||L(t))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[]),Object(n.useEffect)((function(){var e=document.querySelector("#mobile-channel-list");x&&e?(e.classList.add("show"),document.body.style.overflow="hidden"):!x&&e&&(e.classList.remove("show"),document.body.style.overflow="auto")}),[x]),Object(n.useEffect)((function(){var e=function(){document.documentElement.style.setProperty("--app-height","".concat(window.innerHeight,"px"))};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var R=function(){return O(!x)},M={giphyState:g,setGiphyState:f};return a?l.a.createElement(m.a,{client:a,theme:"messaging ".concat(k)},l.a.createElement("div",{id:"mobile-channel-list",onClick:R},l.a.createElement(v.a,{filters:ot,sort:dt,options:ut,List:function(e){return l.a.createElement(Ue,Object.assign({},e,{onCreateChannel:function(){return w(!b)}}))},Preview:function(e){return l.a.createElement(qe,Object.assign({},e,{setIsCreating:w}))}})),l.a.createElement("div",null,l.a.createElement(p.a,{Input:Ge,maxNumberOfFiles:10,Message:Me,multipleUploads:!0,ThreadHeader:Ke,TypingIndicator:function(){return null}},b&&l.a.createElement(Le,{toggleMobile:R,onClose:function(){return w(!1)}}),l.a.createElement(vt.Provider,{value:M},l.a.createElement(tt,{theme:k,toggleMobile:R}))))):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(pt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[433,1,2]]]);
//# sourceMappingURL=main.131b7a26.chunk.js.map